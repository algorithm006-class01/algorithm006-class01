/*
 * é¢˜ç›®è¦æ±‚ï¼šç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œæ‰¾å‡ºä¸¤ä¸ªæ•°å­—aå’Œbä¸­æœ€å¤§çš„é‚£ä¸€ä¸ªã€‚ä¸å¾—ä½¿ç”¨if-elseæˆ–å…¶ä»–æ¯”è¾ƒè¿ç®—ç¬¦ã€‚
 */

class Solution {
    /*
     * è§£å†³æ–¹æ¡ˆï¼šåŒå·ç›¸å‡æ°¸ä¸æº¢å‡ºï¼Œå¼‚å·ç›¸æ¯”æ— è„‘é€‰æ­£ã€‚
     */
    public int maximum1(int a, int b) {
        // å…ˆè€ƒè™‘æ²¡æœ‰æº¢å‡ºæ—¶çš„æƒ…å†µï¼Œè®¡ç®— b - a çš„æœ€é«˜ä½ï¼Œä¾ç…§é¢˜ç›®æ‰€ç»™æç¤º keepA = 1 æ—¶ a > bï¼Œå³ b - a ä¸ºè´Ÿ
        int keepA = b - a >>> 31;
        // å†è€ƒè™‘ a b å¼‚å·çš„æƒ…å†µï¼Œæ­¤æ—¶æ— è„‘é€‰æ˜¯æ­£å·çš„æ•°å­—
        int aSign = a >>> 31, bSign = b >>> 31;
        // diffSign = 0 æ—¶åŒå·ï¼ŒdiffSign = 1 æ—¶å¼‚å·
        int diffSign = aSign ^ bSign;
        // åœ¨å¼‚å·ï¼Œå³ diffSign = 1 æ—¶ï¼Œ(1)ä½¿ä¹‹å‰ç®—å‡ºçš„ keepA æ— æ•ˆï¼Œ(2)åªè€ƒè™‘ä¸¤ä¸ªæ•°å­—çš„æ­£è´Ÿå…³ç³»ï¼šbè´Ÿå·ç•™aï¼Œbæ­£å·ç•™b
        keepA = (keepA & (diffSign ^ 1)) | (bSign & diffSign);
        return a * keepA + b * (keepA ^ 1);
    }

    /*
     * è§£å†³æ–¹æ¡ˆï¼šï¼ˆ1ï¼‰è½¬åŒ–ä¸ºlongç±»å‹ï¼Œï¼ˆ2ï¼‰ä½œå·®ï¼Œåˆ¤æ–­ç¬¦å·ä½ï¼Œï¼ˆ3ï¼‰æ ¹æ®ç¬¦å·ä½å–å€¼ 
     *
     * é¦–å…ˆè¿™é“é¢˜è¯´äº†ä¸èƒ½ä½¿ç”¨if-elseå’Œæ¯”è¾ƒè¿ç®—ç¬¦ã€‚
     * ä¹Ÿå°±æ˜¯è¯´åº“å‡½æ•°è°ƒç”¨åˆ°è¿™ä¸¤ä¸ªçš„ä¹Ÿä¸èƒ½ç”¨ï¼Œæƒ³maxï¼Œsortéƒ½ä¸èƒ½ç”¨ã€‚ç„¶åè¿˜æœ‰ä¸‰ç›®è¿ç®—ç¬¦æ›´åŠ ä¸èƒ½ç”¨ã€‚
     * è¿™é¢˜æ€ä¹ˆåšï¼Œå…¶å®é¢˜ç›®çš„å››ä¸ªæç¤ºå·²ç»å‘Šè¯‰ä½ äº†ã€‚(ä½ ä»¬å¯ä»¥è‡ªè¡Œå»çœ‹ã€‚)
     * é—®é¢˜å…¶å®è¿˜å‰©ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æ€ä¹ˆå–å‡ºintç±»å‹çš„ç¬¦å·ä½ï¼Œå¦ä¸€ä¸ªæ˜¯è¶…è¿‡intç±»å‹æ€ä¹ˆåŠã€‚
     * åè€…å¯ä»¥ç”¨longæ¥è§£å†³ï¼Œé‚£ä¹ˆå‰è€…å‘¢ï¼Ÿ
     * è¿™é‡Œéœ€è¦äº†è§£ä¸€ä¸‹longæˆ–è€…æ˜¯intç±»å‹äº†ã€‚ç¬¦å·ä½éƒ½æ˜¯åœ¨ç¬¬ä¸€ä½ä¸Šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´longç±»å‹å³ç§»63ä½å°±å¯ä»¥æ‹¿åˆ°ã€‚
     * å…¶ä¸­æœ‰ä¸€ç‚¹ï¼Œæ­£æ•°å³ç§»é«˜ä½è¡¥0ï¼Œä½†æ˜¯è´Ÿæ•°å³ç§»é«˜ä½è¡¥1ã€‚
     * è¿™é‡Œæˆ‘æ”¾ä¸Šä¸€ä¸ªé“¾æ¥ï¼Œä»‹ç»äº†å·¦ç§»å’Œå³ç§»åœ¨æ­£æ•°ä¸è´Ÿæ•°ä¸­çš„æƒ…å†µã€‚
     * https://www.csdn.net/gather_2b/MtzaIg4sOTctYmxvZwO0O0OO0O0O.html
     */
    public int maximum2(int a, int b) {
        int k = (int)((((long)a - (long)b) >> 63) & 1);  // å–åšå·®ä¹‹åçš„ç¬¦å·ä½
        return b * k + a * (k ^ 1);
    }


    /*
     * è§£å†³æ–¹æ¡ˆï¼šæœ¬è´¨æ˜¯å¹³å‡å€¼æ³•ï¼š max(a, b) = ((a + b) + abs(a - b)) / 2ã€‚
     * 
     *         abs(var) = (var ^ (var >> 63)) - (var >> 63)
     *   
     *  ä¸ºäº†å›é¿absï¼Œåˆ©ç”¨ä½è¿ç®—å®ç°ç»å¯¹å€¼åŠŸèƒ½ã€‚
     *  ä»¥int8_tä¸ºä¾‹ï¼šåˆ†æè¿ç®—ï¼š(var ^ (var >> 7)) - (var >> 7)
     *  var >= 0: var >> 7 => 0x00ï¼Œå³ï¼š(var ^ 0x00) - 0x00ï¼Œå¼‚æˆ–ç»“æœä¸ºvar
     *  var < 0: var >> 7 => 0xFFï¼Œå³ï¼š(var ^ 0xFF) - 0xFFï¼Œvar ^ 0xFFæ˜¯åœ¨å¯¹varçš„å…¨éƒ¨ä½å–åï¼Œ-0xFF <=> +1, 
     *           å¯¹signed intå–ååŠ ä¸€å°±æ˜¯å–å…¶ç›¸åæ•°ã€‚
     *  ä¸¾ä¸ªæ —å­ğŸŒ°ï¼švar = -3 <=> 0xFDï¼Œ(var ^ 0xFF) - 0xFF= 0x02 - 0xff= 0x03
     */
    public int maximum(int a, int b) {
        long sum = (long)a + (long)b;
        long diff = (long)a - (long)b;
        long abs_diff = (diff ^ (diff >> 63)) - (diff >> 63);
        return (int)((sum + abs_diff) >> 1);
    }
}